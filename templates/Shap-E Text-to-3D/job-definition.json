{
    "version": "0.1",
    "type": "container",
    "meta": {
      "trigger": "dashboard"
    },
    "ops": [
      {
        "type": "container/run",
        "id": "shap-e-text-to-3d",
        "args": {
          "image": "pytorch/pytorch:2.0.0-cuda11.7-cudnn8-runtime",
          "cmd": [
            "bash", "-c",
            "pip install diffusers transformers accelerate && python -c \"import torch; from diffusers import ShapEPipeline; from diffusers.utils import export_to_gif; ckpt_id = 'openai/shap-e'; pipe = ShapEPipeline.from_pretrained(ckpt_id).to('cuda'); guidance_scale = 15.0; prompt = '${PROMPT}'; images = pipe(prompt, guidance_scale=guidance_scale, num_inference_steps=64).images; gif_path = export_to_gif(images[0], '/output/${PROMPT}_3d.gif'); print('Generated 3D model saved to', gif_path)\""
          ],
          "gpu": true,
          "env": {
            "PROMPT": "{{PROMPT}}"
          },
          "mounts": [
            {
              "type": "bind",
              "source": "{{OUTPUT_DIR}}",
              "target": "/output"
            }
          ]
        }
      }
    ]
  }