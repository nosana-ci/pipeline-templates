{
  "version": "0.1",
  "type": "container",
  "meta": {
    "trigger": "dashboard"
  },
  "global": {
      "variables": {
        "OPENCLAW_MODEL": "glm-4.7-flash:latest",
        "OPENCLAW_GATEWAY_TOKEN": "MY_SECRET_TOKEN"
    }
  },
  "ops": [
    {
      "id": "ollama",
      "type": "container/run",
      "args": {
        "image": "docker.io/ollama/ollama:0.15.4",
        "gpu": true,
        "resources": [
          {
            "type": "Ollama",
            "model": "%%global.variables.OPENCLAW_MODEL%%"
          }
        ]
      },
      "execution": {
        "group": "main"
      }
    },
    {
      "id": "openclaw-gateway",
      "type": "container/run",
      "args": {
        "image": "docker.io/alpine/openclaw:2026.2.1",
        "entrypoint": ["/bin/sh"],
        "cmd": [
          "-c",
          "mkdir -p /home/node/.openclaw && printf '%s' '{\"gateway\":{\"mode\":\"local\",\"auth\":{\"mode\":\"token\",\"token\":\"'\"$OPENCLAW_GATEWAY_TOKEN\"'\"},\"controlUi\":{\"dangerouslyDisableDeviceAuth\":true}},\"models\":{\"providers\":{\"ollama\":{\"baseUrl\":\"'\"$OLLAMA_BASE_URL\"'/v1\",\"api\":\"openai-completions\",\"apiKey\":\"abc\",\"models\":[{\"id\":\"'\"$OPENCLAW_MODEL\"'\",\"name\":\"'\"$OPENCLAW_MODEL\"'\",\"reasoning\":false,\"input\":[\"text\"],\"cost\":{\"input\":0,\"output\":0,\"cacheRead\":0,\"cacheWrite\":0},\"contextWindow\":128000,\"maxTokens\":8192}]}}},\"agents\":{\"defaults\":{\"model\":{\"primary\":\"ollama/'\"$OPENCLAW_MODEL\"'\"}}}}' > /home/node/.openclaw/openclaw.json && node -e 'JSON.parse(require(\"fs\").readFileSync(\"/home/node/.openclaw/openclaw.json\",\"utf8\"))' && node dist/index.js gateway --bind lan --port 18789 --verbose --ws-log full"
        ],
        "expose": 18789,
        "env": {
          "OPENCLAW_MODEL": "%%global.variables.OPENCLAW_MODEL%%",
          "OPENCLAW_GATEWAY_TOKEN": "%%global.variables.OPENCLAW_GATEWAY_TOKEN%%",
          "OLLAMA_BASE_URL": "http://%%ops.ollama.host%%:11434"
        }
      },
      "execution": {
        "group": "main"
      }
    }
  ]
}